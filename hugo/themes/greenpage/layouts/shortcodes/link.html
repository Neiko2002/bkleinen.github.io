{{- $title := .Get "title" -}}
{{- $link := .Get "link" -}}

{{- $completeLink := printf "%s%s" .Page.RelPermalink $link -}}
{{- .Page.Scratch.Add "completeLink" (slice $completeLink) -}}
{{- $cleanLink := (replaceRE "/[^/]*/../" "/" $completeLink) -}}
{{- .Page.Scratch.Add "linkornot" (slice $cleanLink) -}}

{{- $page := .Page.GetPage $cleanLink -}}

{{- with $page -}}
  [{{- $title}}]({{$link}})
{{- else }}
  {{- $title -}}
{{- end -}}
